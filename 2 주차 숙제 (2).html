<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>정지윤 2주차 과제(2)</title>
    
    <!--구글폰트 -->
    <link href="https://fonts.googleapis.com/css?family=Sunflower:300&display=swap" rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- JS -->   
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <!--JavaScript-->
    <script type="text/javascript">
        function order() {
            let name = $('#order_name').val();
            let count = $('#order_count').val();
            let address = $('#order_address').val();
            let phone = $('#order_phone').val();
            let item = '순례자';

        $.ajax({
            type: "POST",
            url: "http://spartacodingclub.shop/order",
            data: { name_give:name, count_give:count, address_give:address, phone_give:phone, item_give:item },
            success: function(response){
                if(response['result'] == 'success'){
                alert('주문 완료!');
                window.location.reload();
                    }
                }
            })
        }

        $(document).ready(function(){
            $('#orders-box').html('');
            listing();
        });

        function listing() {
            $.ajax({
              type: "GET",
              url: "http://spartacodingclub.shop/order?item_give=순례자",
              data: {},
              success: function(response){
                 if (response['result'] == 'success') {
                   let orders = response['orders'];
                   for (let i = 0; i < orders.length; i++) {
                     make_card(orders[i]['item'],orders[i]['name'],orders[i]['count'],orders[i]['address'],orders[i]['phone'])
                 }
                } else {
                  alert('주문을 받아오지 못했습니다');
                }
            }
        })
    }

        function make_card(item,name,count,address,phone) {
            let temp_html = '<tr>\
            <td>'+item+'</td>\
            <td>'+name+'</td>\
            <td>'+count+'</td>\
            <td>'+address+'</td>\
            <td>'+phone+'</td>\
            </tr>';
            $('#orders-box').append(temp_html);
        }
        </script>

        <!--CSS-->
<style>
     .size {
		       width: 1200px;   
		      margin: 0 auto;
			  
  }
     .top-image {
          margin: 50px 150px auto 150px;

   }
      .form-group {
           text-align: center
  }
      .orders {
       	 margin: 50px 150px 50px 150px;
      }
      .title{
      		margin: 30px auto 30px auto;
      }
      .title_2{
      		margin-top: 50px;
      		margin-bottom:15px;
      }
       .orders {
       		 margin-top: 100px;
       }
        .enter { 
       		 width: 900px;
    		margin: 0px 250px 0px 250px;
      }
       .join {
        	margin: 0px 250px 0px 250px;
       }
      .table {
       		 width: 1200%;
      }
      .order {
       		 margin: 30px 125px 0px 125px;
      }

            </style>
        </head>

<body>
		<div class = "size">
     	    <div>
                <div>
                    <div>            
                        <img src = "http://post.phinf.naver.net/MjAxODEwMjVfMjA4/MDAxNTQwNDU1MTA2MTQ1.BVyJN67vR5CjLVboTJ047Ohyx_hJQbfTBwA48jhPKHgg.omc76hVGnPLqbls7JLCUhAvq_VsXgxSyaqXeqPT-tjMg.JPEG/Iq295dSuwmDeCXgNI1GCoHv3mQxI.jpg" width="1200" height="450">
                    </div>
                </div>
                <div>
                     <p class="title"> <span style="font-size:24pt; line-height:2em">까미노 데 산티아고 그룹순례</span>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 가격 : 12,00,000원 / 명 (최대 5명)  </p> 

                    <p>스페인을 대표하는 산티아고 데 콤포스텔라 순례길 탐방은 단순한 휴가가 아니
                    라 삶에 대한 시선을 되짚어볼 수 있는 중요한 전환점의 계기가 될 수 있습니다. 30일간의 여정은 멋진 볼거리가 풍부한 도시 마드리드를 이틀 동안 둘러보며 시작됩니다. 단 한번 뿐인 순례길 여정을 시작하며 세계적으로 유명한 순례길을 걷습니다.</p>
                </div>
                <div>
            		<div class= "title">
                    <h4>신청하기</h4>
          			</div>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="inputGroup-sizing-default">주문자 성함</span>
                        </div>
                        <input type="text" class="form-control" id="order_name" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                    </div>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="inputGroup-sizing-default">수량</span>
                        </div>
                        <select class="form-control" id="order_count">
                            <option selected>--신청인원(최대5명)--</option>
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                        </select>
                    </div>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="inputGroup-sizing-default">주소</span>
                        </div>
                        <input type="text" class="form-control" id="order_address" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                    </div>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="inputGroup-sizing-default">전화번호</span>
                        </div>
                        <input type="text" class="form-control" id="order_phone" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                    </div>
                </div>
                <div class="order">
                    <center>
                        <button onclick="order()" type="submit" class="btn btn-primary">신청하기</button>
                    </center>
                </div>
                <div class="orders">
                    <table class="table">
                        <thead>
                          <tr>
                            <th scope="col">명명</th>
                            <th scope="col">이름</th>
                            <th scope="col">수량</th>
                            <th scope="col">주소</th>
                            <th scope="col">전화번호</th>
                        </tr>
                    </thead>
                    <tbody id="orders-box">
                        <tr>                            
                        </tr>  
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>
